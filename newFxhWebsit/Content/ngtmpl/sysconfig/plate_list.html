<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
</head>
<body>

    <div class="wrapper">

        <ul class="breadcrumb panel">
            <li><a><i class="fa fa-home"></i>版块管理</a></li>
        </ul>
        <div class="panel">
            <div class="panel-heading">
                <form>
                    <ul class="btn-group pull-left" style="margin-right:12px;">
                        <li><a class="btn btn-success" ng-click="open()">新增版块</a></li>
                    </ul>
                    <div class="btn-group pull-left" style="margin-right:12px;">
                        <select class="form-control " ng-model="category_id" ng-change="changecat(category_id)">
                            <option value="-1">类别</option>
                            <option ng-repeat="item in category_list" ng-model="item.Id" value="{{item.Id}}">{{item.Name}}</option>
                        </select>
                    </div>
                    <!--<div class="form-inline">
                        <input id="searchBtn" type="submit" value="搜索" ng-click="search()" class="btn btn-danger" />
                    </div>-->
                </form>
            </div>
            <div class="panel-body">
                <table width="100%" border="0" cellpadding="0" cellspacing="0" class="table table-bordered table-striped table-condensed">
                    <tr>
                        <th>ID</th>
                        <th>版块名称</th>
                        <th>版块类别</th>
                        <th>图片</th>
                        <th>发布时间</th>
                        <th class="clear_bg">操作</th>
                    </tr>
                    <tr ng-repeat="item in list">
                        <td>{{item.id}}</td>
                        <td style="max-width:100px">{{item.category}}</td>
                        <td>{{CatName(item.pid)}}</td>
                        <td><img src="{{item.icon}}" alt="版块图片" /></td>
                        <td>{{item.create_dt}}</td>
                        <td class="td_handle">
                            <a href="javascript:void(0)" class="label label-danger" ng-click="DeletePost(item.id)">删除</a>
                        </td>
                </table>
               
            </div>
        </div>
    </div>
    <div class="zhezhao" ng-show="isShow">
        <div class="Mask  modal-dialog">
            <div class="styleCurrentLocal"><b>添加版块</b></div>
            <div class="styleFillList">
                <!--<dl class="fill_single"><dt>标题<span class="requiredstyle">*</span>：</dt><dd><select ng-options="a.Id as a.Name for a in pushMemberTypes" ng-model="pushMemberType" class="drop-menu"></select></dd></dl>-->
                <dl class="fill_single">
                    <dt>版块<span class="requiredstyle">*</span>：</dt>
                    <dd>
                        <select ng-model="add_cat_id" class="drop-menu" style="width: 80%">
                            <option value="-1">版块分类</option>
                            <option ng-repeat="item in category_list" ng-model="add_cat_id" value="{{item.Id}}" >{{item.Name}}</option>
                        </select>
                    </dd>
                </dl>
                <dl class="fill_single">
                    <dt>版块名称<span class="requiredstyle">*</span>：</dt>
                    <dd>
                        <input type="text" ng-model="add_plate_name" value="" />
                    </dd>
                </dl>
                <dl class="fill_single">
                    <dt>版块图标<span class="requiredstyle">*</span>：</dt>
                    <dd>
                        <input ng-hide="imgpath!=undefined && imgpath!=''" accept="image/*" type="file" ngf-select ng-model="file" ngf-max-size="10MB" required
                               ngf-model-invalid="errorFile" ngf-change="uploadImg(file)" style="width: 300px" />
                        <img src="{{imgpath}}" alt="" /><button class="close" ng-show="imgpath!=undefined && imgpath!=''" ng-click="clearImg()">x</button>
                    </dd>
                </dl>
                <div class="styleButton">
                    <input type="button" value="保存" class="btn btn_confirm" ng-click="AddPlat()">
                    <input type="button" value="取消" class="btn btn_cancel" id="closeBtn" ng-click="close()">
                </div>

            </div>
        </div>
    </div>
</body>
</html>
